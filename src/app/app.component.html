<div class="container mt-4">
  <div class="card p-4">
    <h1>Aplicación Empleados Angular</h1>
    
    <!-- Indicador de modo -->
    <div class="alert alert-info" *ngIf="isEditMode">
      <strong>Modo Edición:</strong> Editando empleado #{{empleado.noEmpleado}}
    </div>

    <form>
      <!-- Campo ID solo visible en modo edición y como readonly -->
      <div class="form-group mb-3" *ngIf="isEditMode">
        <label>No. Empleado:</label>
        <input type="number" [(ngModel)]="empleado.noEmpleado" [ngModelOptions]="{standalone: true}" 
               class="form-control" placeholder="Número de empleado" readonly>
      </div>

      <div class="form-group mb-3">
        <label>Nombre:</label>
        <input type="text" [(ngModel)]="empleado.nombre" [ngModelOptions]="{standalone: true}" 
               class="form-control" placeholder="Nombre completo" required>
      </div>

      <div class="form-group mb-3">
        <label>Correo:</label>
        <input type="email" [(ngModel)]="empleado.correo" [ngModelOptions]="{standalone: true}" 
               class="form-control" placeholder="Correo electrónico" required>
      </div>

      <div class="form-group mb-3">
        <label>Teléfono:</label>
        <input type="text" [(ngModel)]="empleado.telefono" [ngModelOptions]="{standalone: true}" 
               class="form-control" placeholder="Teléfono" required>
      </div>

      <div class="form-group mb-3">
        <label>Fecha de Nacimiento:</label>
        <input type="date" [(ngModel)]="empleado.fechaNacimiento" [ngModelOptions]="{standalone: true}" 
               class="form-control" required>
      </div>

      <div class="form-group mb-3">
        <label>sexo:</label><br>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="sexo" [(ngModel)]="empleado.sexo" 
                 [ngModelOptions]="{standalone: true}" value="M" required>
          <label class="form-check-label">Masculino</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="sexo" [(ngModel)]="empleado.sexo" 
                 [ngModelOptions]="{standalone: true}" value="F" required>
          <label class="form-check-label">Femenino</label>
        </div>
      </div>

      <div class="mt-3">
        <button type="button" class="btn btn-primary" (click)="guardarEmpleado()">
          {{isEditMode ? 'Actualizar Empleado' : 'Guardar Empleado'}}
        </button>
        
        <button type="button" class="btn btn-secondary ms-2" (click)="cancelarEdicion()" *ngIf="isEditMode">
          Cancelar
        </button>
        
        <button type="button" class="btn btn-outline-secondary ms-2" (click)="resetEmpleado()" *ngIf="!isEditMode">
          Limpiar Formulario
        </button>
      </div>
    </form>
  </div>

  <div class="container mt-4">
    <h2>Lista de Empleados</h2>
    <div *ngIf="!idResultLoaded" class="text-center">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
    </div>
    
    <table class="table table-striped" *ngIf="idResultLoaded">
      <thead class="table-dark">
        <tr>
          <th scope="col">NoEmpleado</th>
          <th scope="col">Nombre</th>
          <th scope="col">Correo</th>
          <th scope="col">Teléfono</th>
          <th scope="col">Fecha Nacimiento</th>
          <th scope="col">sexo</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let emp of listaEmpleados">
          <td>{{emp.noEmpleado}}</td>
          <td>{{emp.nombre}}</td>
          <td>{{emp.correo}}</td>
          <td>{{emp.telefono}}</td>
          <td>{{emp.fechaNacimiento | date:'dd/MM/yyyy'}}</td>
          <td>{{emp.sexo === 'M' ? 'Masculino' : 'Femenino'}}</td>
          <td>
            <button type="button" class="btn btn-success btn-sm me-1" (click)="editarEmpleado(emp)">
              Editar
            </button>
            <button type="button" class="btn btn-danger btn-sm" (click)="eliminarEmpleado(emp)">
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    
    <div *ngIf="idResultLoaded && listaEmpleados.length === 0" class="alert alert-info">
      No hay empleados registrados.
    </div>
  </div>
</div>